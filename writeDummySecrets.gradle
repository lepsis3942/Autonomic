import groovy.xml.*

/**
 * Script to allow CI build to pass with missing strings that aren't checked in to source control
 */
task writeDummySecrets {
    doLast {
        [
                "/app/src/main/res/values/public.xml",
                "/network/src/main/res/values/public.xml"
        ].each {
            file(rootProject.projectDir.absolutePath + it).withWriter { writer ->
                def xml = new MarkupBuilder(new IndentPrinter(writer, "    ", true))
                xml.doubleQuotes = true
                xml.mkp.xmlDeclaration(version: '1.0', encoding: 'utf-8')

                xml.resources() {
                    string(name: 'autonomic_base_url', 'dummy')
                    string(name: 'spotify_app_client_id', 'dummy')
                    string(name: 'spotify_app_callback_url', 'dummy')
                }
            }
        }
    }
}